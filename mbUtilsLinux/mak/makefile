#********************************************************************
# File:  makefile
#--------------------------------------------------------------------
# Description:
#
#--------------------------------------------------------------------

PROG_NAME = mbUtils

HOME_DIR =  ../..
DIR =       ..
TMP_DIR =   $(DIR)

######################################################################
# Source, Object, and Binary Directories
#---------------------------------------------------------------------

MAK_DIR = $(DIR)/mak
SRC_DIR = $(DIR)/src
OBJ_DIR = $(TMP_DIR)/obj
INC_DIR = $(DIR)/inc
BIN_DIR = $(DIR)/mak

######################################################################
# Source Files
#---------------------------------------------------------------------

SRC_FILES = \
	$(SRC_DIR)/mbCrc.c          \
	$(SRC_DIR)/md5.c            \
	$(SRC_DIR)/mbStrUtils.c     \
	$(SRC_DIR)/mbMalloc.c       \
	$(SRC_DIR)/mbLog.c          \
	$(SRC_DIR)/mbLock.c         \
	$(SRC_DIR)/mbFileUtils.c

######################################################################
# Include Files
#---------------------------------------------------------------------

INC_FILES = \
	$(INC_DIR)/mbCrc.h          \
	$(INC_DIR)/md5.h            \
	$(INC_DIR)/mbTypes.h        \
	$(INC_DIR)/mbStrUtils.h     \
	$(INC_DIR)/mbLog.h          \
	$(INC_DIR)/mbMalloc.h

######################################################################
# Make Files
#---------------------------------------------------------------------

######################################################################
# Object Files
#---------------------------------------------------------------------

OBJ_FILES = $(SRC_FILES:$(SRC_DIR)%.c=$(OBJ_DIR)%.o)

######################################################################
# Compile Flags
#---------------------------------------------------------------------

LD =    ld
CC =    gcc

C_FLAGS =           \
	-DLINUX=1       \
	-Wall           \
	-I$(INC_DIR)

######################################################################
# Libraries
#---------------------------------------------------------------------

######################################################################
# Targets
#---------------------------------------------------------------------

$(BIN_DIR)/$(PROG_NAME).a: $(OBJ_FILES) $(INC_FILES)
	ar rcvs $(BIN_DIR)/$(PROG_NAME).a $(OBJ_FILES) $(LIBS)

$(OBJ_FILES): $(INC_FILES)

######################################################################
# Clean Commands
#---------------------------------------------------------------------

clean:
	rm -f $(BIN_DIR)/$(PROG_NAME).a
	rm -f $(OBJ_FILES)
	rm -f $(SRC_DIR)/*~ $(INC_DIR)/*~ $(MAK_DIR)/*~

######################################################################
# How to make objects
#---------------------------------------------------------------------

$(OBJ_DIR)/%.o: $(SRC_DIR)/%.c $(INC_FILES)
	$(CC) -c $(C_FLAGS) -o $@ $(SRC_DIR)/$*.c

######################################################################
# End of File
#---------------------------------------------------------------------

