#********************************************************************
# File:  makefile
#--------------------------------------------------------------------
# Description:
#
#--------------------------------------------------------------------

PROG_NAME = pmcdespl

HOMEDIR = 	../..
DIR = 		..
TMPDIR = 	$(DIR)

LINUX_LIB_DIR_64 = /lib/x86_64-linux-gnu

######################################################################
# Source, Object, and Binary Directories
#---------------------------------------------------------------------


MAKDIR = $(DIR)/mak
SRCDIR = $(DIR)/src
OBJDIR = $(TMPDIR)/obj
INCDIR = $(DIR)/inc
BINDIR = $(DIR)/mak

######################################################################
# Source Files
#---------------------------------------------------------------------

SRC_FILES =	$(SRCDIR)/pmcdespl.c

######################################################################
# Include Files
#---------------------------------------------------------------------

INC_FILES =	$(INCDIR)/pmcdesplMain.h

######################################################################
# Make Files
#---------------------------------------------------------------------

######################################################################
# Object Files
#---------------------------------------------------------------------

OBJ_FILES =	$(SRC_FILES:$(SRCDIR)%.c=$(OBJDIR)%.o)

######################################################################
# Compile Flags
#---------------------------------------------------------------------

CC =  	gcc

CFLAGS =        \
	-DLINUX=1   \
	-Wall       \
	-I$(INCDIR)

######################################################################
# Debug Flags
#---------------------------------------------------------------------

######################################################################
# Libraries
# 
# Should I just be using -lpthread and let the OS find the proper lib?
#---------------------------------------------------------------------

#LIBS = /usr/lib/libpthread.so
#LIBS = $(LINUX_LIB_DIR_64)/libpthread.so.0
LIBS = -lpthread

######################################################################
# Targets
#---------------------------------------------------------------------

$(BINDIR)/$(PROG_NAME): $(OBJ_FILES)
	$(CC) $(CFLAGS) $(OBJ_FILES) $(LIBS) -o $(BINDIR)/$(PROG_NAME)

######################################################################
# Clean Commands
#---------------------------------------------------------------------

clean:
	rm -f $(BINDIR)/$(PROG_NAME)
	rm -f $(OBJ_FILES)
	rm -f $(SRCDIR)/*~ $(INCDIR)/*~ $(MAKDIR)/*~

######################################################################
# How to make objects
#---------------------------------------------------------------------

$(OBJDIR)/%.o : 	$(SRCDIR)/%.c
	$(CC) -g -c -o $@ $(CFLAGS) $(SRCDIR)/$*.c

######################################################################
# End of File
#---------------------------------------------------------------------

